{"version":3,"sources":["scripts/mobx/content.js","scripts/components/head/index.js","scripts/components/upload/index.js","scripts/view/mine/index.js"],"names":["Content","flag","this","history","length","observable","title","type","action","a","async","axios","get","res1","tuiJian","data","result","res3","tv","res2","hot1","res4","hot2","res5","live1","res6","live2","keyword","key","computed","post","query","params","res","all","search","console","log","then","indexOf","i","splice","unshift","showToast","Head","connect","state","getIn","pic","loopMine","props","push","loopLogin","getInitPic","dispatch","getHead","replace","baseURL","changeFlag","userInfo","localStorage","JSON","parse","mobile","sessionStorage","tele","url","text","className","mode","onLeftClick","icon","style","width","src","alt","rightContent","onClick","Component","Upload","handleChange","file","headImg","files","FormData","append","changeHead","toString","split","join","click","disabled","ref","el","onChange","display","Mine","observer","handleQuit","clear","resetHead","size"],"mappings":"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","file":"static/js/6.e3551bff.chunk.js","sourcesContent":["import { observable, action, computed, autorun } from \"mobx\"\r\nimport { axios ,showToast} from \"&\"\r\n\r\nclass Content {\r\n\r\n    @observable tuiJian = [];\r\n    @observable tv = [];\r\n    @observable hot1 = [];\r\n    @observable hot2 = [];\r\n    @observable live1 = [];\r\n    @observable live2 = [];\r\n    @observable history=[];\r\n    @observable tabs = [\r\n        { title: \"电视剧\", type: \"TV_PLAY\" },\r\n        { title: \"电影\", type: \"MOVIE\" },\r\n        { title: \"综艺\", type: \"VARIETY_SHOW\" },\r\n        { title: \"少儿动漫\", type: \"MANGA\" }\r\n    ];\r\n\r\n\r\n    @action getTuiJian = async () => {\r\n        const res1 = await axios.get(\"/react/tv1\");\r\n        this.tuiJian = res1.data.result;\r\n        const res3 = await axios.get(\"/react/tv2\");\r\n        this.tv = res3.data.result;\r\n        const res2 = await axios.get(\"/react/hot1\");\r\n        this.hot1 = res2.data.result;\r\n        const res4 = await axios.get(\"/react/hot2\");\r\n        this.hot2 = res4.data.result;\r\n        const res5 = await axios.get(\"/react/live1\");\r\n        this.live1 = res5.data.result;\r\n        const res6 = await axios.get(\"/react/live2\");\r\n        this.live2 = res6.data.result;\r\n    }\r\n\r\n    @observable key = \"\";\r\n\r\n    @action setKey=(keyword)=>{\r\n        this.key=keyword;\r\n    }\r\n\r\n    @computed get flag(){\r\n        var flag=false;\r\n        if(this.history.length>0){\r\n            flag=true\r\n        }\r\n        return flag\r\n    }\r\n\r\n    @observable all=[];\r\n\r\n    //清空搜索历史\r\n    @action clearHistory= async ()=>{\r\n        const res=await axios.post(\"/react/clearHistory\");\r\n        this.history=[];\r\n    }\r\n\r\n    @observable initialPage=0;\r\n    @action getAll =async (query)=>{\r\n        const res=await axios.get(\"/react/all\",{params:{query}});\r\n        this.all=res.data.result;\r\n    }\r\n\r\n    @observable search=[];\r\n    @action clearSearch=()=>{\r\n        this.search=[]\r\n    }\r\n    @action getSearch=async ({key,flag})=>{\r\n        console.log(key)\r\n        if(flag){\r\n            axios.post(\"/react/searchHistory\",{flag}).then(res=>{\r\n                this.history=res.data.history;\r\n            })\r\n        }else{\r\n            if(key){\r\n                axios.post(\"/react/searchHistory\",{key,flag}).then(res=>{\r\n                    // console.log(res.data)\r\n                    if(this.history.indexOf(key)!==-1){\r\n                        let i=this.history.indexOf(key);\r\n                        this.history.splice(i,1)\r\n                    }\r\n                    this.history.unshift(key);\r\n                    this.key=\"\";\r\n                })\r\n                const res=await axios.get(\"/react/all\",{params:{key}});\r\n                this.search=res.data.result\r\n                console.log(res.data.result)\r\n            }else{\r\n                showToast(\"请输入关键字\")\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default new Content();","import \"./index.scss\";\r\nimport React, { Component } from \"react\"\r\nimport { NavBar, Icon } from \"antd-mobile\"\r\nimport { connect } from \"react-redux\"\r\nimport { changeFlag, getHead } from \"~/actions\"\r\nimport {axios,baseURL} from \"&\"\r\n\r\n\r\n@connect(\r\n    state => ({\r\n        flag: state.getIn([\"data\", \"flag\"]),\r\n        pic: state.getIn([\"data\", \"pic\"])\r\n    })\r\n)\r\nclass Head extends Component {\r\n\r\n    loopMine = () => {\r\n        this.props.history.push(\"/main/mine\")\r\n    }\r\n    loopLogin = () => {\r\n        this.props.history.push(\"/login\")\r\n    }\r\n    // componentDidMount(){\r\n    //     console.log(\"000000\")\r\n    //     // let userInfo = localStorage.userInfo;\r\n    //     // userInfo = JSON.parse(userInfo);\r\n    //     // console.log(userInfo.mobile)\r\n    //     // console.log(sessionStorage.tele)\r\n    //     this.props.dispatch(changeFlag(this.props.history));\r\n    //      let userInfo = localStorage.userInfo;\r\n    //     if (userInfo) {\r\n    //         userInfo = JSON.parse(userInfo);\r\n    //         if (userInfo.mobile == sessionStorage.tele) {\r\n    //             this.props.dispatch(getHead(userInfo.url));\r\n    //         } else {\r\n    //             this.props.dispatch(getHead());\r\n    //         }\r\n    //     } else {\r\n    //         this.props.dispatch(getHead());\r\n    //     }\r\n    // }\r\n    componentWillMount() {\r\n        this.props.dispatch(changeFlag(this.props.history));\r\n        let userInfo = localStorage.userInfo;\r\n        if (userInfo) {\r\n            userInfo = JSON.parse(userInfo);\r\n            if (userInfo.mobile === sessionStorage.tele) {\r\n                // console.log(userInfo.mobile)\r\n                this.props.dispatch(getHead(userInfo.url));\r\n            } else {\r\n                this.getInitPic();\r\n            }\r\n        } else {\r\n            this.getInitPic();\r\n        }\r\n    }\r\n    getInitPic = ()=>{\r\n            axios.post(\"/react/getlastPic\")\r\n                .then(res=>{\r\n                    if(!!res.data.type){\r\n                        this.props.dispatch(getHead(res.data.result.pic.replace(/public/,baseURL)))\r\n                    }else{\r\n                        this.props.dispatch(getHead(this.props.pic))\r\n                    }\r\n                })\r\n    }\r\n    render() {\r\n        const {\r\n            flag,\r\n            title,\r\n            text,\r\n            pic\r\n        } = this.props\r\n        console.log(flag)\r\n        return (\r\n            <div className=\"head\">\r\n                <NavBar\r\n                    mode=\"light\"\r\n                    onLeftClick={() => console.log('onLeftClick')}\r\n                    icon={<img style={{ width: '1.2rem' }} src={\"http://img.cmvideo.cn:8080/publish/pictures/comment/app-management-server/2020/1/1/1312208.png\"} alt=\"\" />}\r\n                    rightContent={[\r\n                        flag && <img className=\"right\" key={0} onClick={this.loopMine} style={{ width: '1.2rem' }} src={pic} alt=\"\" />,\r\n                        !flag && <img className=\"right\" key={1} onClick={this.loopLogin} style={{ width: '1.2rem' }} src={\"data:image/png;base64,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\"} alt=\"\" />\r\n                    ]}\r\n                >\r\n                    {!title && <p className=\"input\" onClick={() => this.props.history.push(\"/search\")}>\r\n                        <Icon type=\"search\" />\r\n                        <span>四季中国</span>\r\n                    </p>}\r\n                    {title && <span>{text}</span>}\r\n                </NavBar>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nexport default Head;\r\n","import \"./index.scss\"\r\nimport React, { Component } from \"react\"\r\nimport { connect } from \"react-redux\"\r\nimport { changeHead, getHead, changeFlag } from \"~/actions\"\r\nimport { axios, baseURL, showToast,getTele } from \"&\"\r\n\r\n@connect(\r\n    state => ({\r\n        pic: state.getIn([\"data\", \"pic\"]),\r\n        flag: state.getIn([\"data\", \"flag\"])\r\n    })\r\n)\r\nclass Upload extends Component {\r\n    handleChange = () => {\r\n        const file = this.headImg.files[0];\r\n        // console.log(file)\r\n        var data = new FormData();\r\n        data.append(\"avatar\", file);\r\n        this.props.dispatch(changeHead(data))\r\n    }\r\n    componentWillMount() {\r\n        this.props.dispatch(changeFlag(this.props.history));\r\n        let userInfo = localStorage.userInfo;\r\n        if (userInfo) {\r\n            userInfo = JSON.parse(userInfo);\r\n            if (userInfo.mobile === sessionStorage.tele) {\r\n                // console.log(userInfo.url)\r\n                this.props.dispatch(getHead(userInfo.url));\r\n            } else {\r\n                this.getInitPic();\r\n            }\r\n        } else {\r\n            this.getInitPic();\r\n        }\r\n    }\r\n    getInitPic = () => {\r\n        axios.post(\"/react/getlastPic\")\r\n            .then(res => {\r\n                // console.log(res.data.result.pic)\r\n                if (!!res.data.type) {\r\n                    this.props.dispatch(getHead(res.data.result.pic.replace(/public/, baseURL)))\r\n                } else {\r\n                    this.props.dispatch(getHead(this.props.pic))\r\n                }\r\n            })\r\n    }\r\n    render() {\r\n        const {\r\n            pic,\r\n            flag\r\n        } = this.props\r\n        let tele = \"\"\r\n        if (sessionStorage.tele) {\r\n            tele = sessionStorage.tele.toString();\r\n            tele = tele.split(\"\")\r\n            tele.splice(3, 4, \"****\").join(\"\")\r\n        } else {\r\n            tele = \"请先登录\"\r\n        }\r\n        return (\r\n            <div className=\"sec1\">\r\n                <div className=\"head\" onClick={() => this.headImg.click()}>\r\n                    <img src={pic} alt=\"\" />\r\n                </div>\r\n                <div className=\"name\">\r\n                    <p>{tele}</p>\r\n                    {sessionStorage.tele && <span>开通vip,享受极致观看体验</span>}\r\n                </div>\r\n                <input type=\"file\" disabled={flag?\"\":\"disabled\"} ref={el => this.headImg = el} onChange={this.handleChange} style={{ display: 'none' }} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Upload;","import \"./index.scss\";\r\nimport React, { Component } from \"react\"\r\nimport { connect } from \"react-redux\";\r\nimport { WhiteSpace, Button } from \"antd-mobile\"\r\nimport Head from \"~/components/head\";\r\nimport { changeFlag, getHead, resetHead } from \"~/actions\"\r\nimport Upload from \"~/components/upload\";\r\nimport { observer } from \"mobx-react\";\r\nimport content from \"~/mobx/content\";\r\nimport { axios, baseURL } from \"&\"\r\n\r\n\r\n\r\n@connect(\r\n    state => ({\r\n        pic: state.getIn([\"data\", \"pic\"])\r\n    })\r\n)\r\n@observer\r\nclass Mine extends Component {\r\n    handleQuit = () => {\r\n        sessionStorage.clear();\r\n        this.props.dispatch(changeFlag());\r\n        this.props.dispatch(resetHead());\r\n        // setTimeout(() => {\r\n        this.props.history.push(\"/main/home\")\r\n        // }, 2000)\r\n    }\r\n    componentWillMount() {\r\n        this.props.dispatch(changeFlag(this.props.history));\r\n        let userInfo = localStorage.userInfo;\r\n        if (userInfo) {\r\n            userInfo = JSON.parse(userInfo);\r\n            if (userInfo.mobile === sessionStorage.tele) {\r\n                // console.log(userInfo.url)\r\n                this.props.dispatch(getHead(userInfo.url));\r\n            } else {\r\n                this.getInitPic();\r\n            }\r\n        } else {\r\n            this.getInitPic();\r\n        }\r\n    }\r\n    getInitPic = () => {\r\n        console.log(this.props.pic)\r\n        axios.post(\"/react/getlastPic\")\r\n            .then(res => {\r\n                if (!!res.data.type) {\r\n                    this.props.dispatch(getHead(res.data.result.pic.replace(/public/, baseURL)))\r\n                } else {\r\n                    this.props.dispatch(getHead(this.props.pic))\r\n                }\r\n            })\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Head title={true} text=\"个人中心\" />\r\n                <WhiteSpace size=\"xs\" />\r\n                <Upload />\r\n                <WhiteSpace />\r\n                <div className=\"sec2\">\r\n                    <span>会员中心</span>\r\n                </div>\r\n                <WhiteSpace />\r\n                <div>\r\n                    <div className=\"sec2 sec3\">\r\n                        <span>历史纪录</span>\r\n                    </div>\r\n                </div>\r\n                <WhiteSpace />\r\n                <div className=\"sec2 sec4\">\r\n                    <span>我的收藏</span>\r\n                </div>\r\n                <WhiteSpace />\r\n                <div className=\"sec2 sec5\">\r\n                    <span>帮助和反馈中心</span>\r\n                </div>\r\n                <WhiteSpace size=\"xl\" />\r\n                {sessionStorage.tele && <Button type=\"primary\" onClick={() => this.handleQuit()}>退出登录</Button>}\r\n                {!sessionStorage.tele && <Button type=\"primary\" onClick={() => { this.props.history.push(\"/login\") }}>登录</Button>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Mine;\r\n\r\n"],"sourceRoot":""}